# 职位匹配与「钱多事少离家近」

Tatha 的职位匹配打分（`JobMatchScore`）在借鉴 DailyJobMatch 多维度基础上，融入了**钱多、事少、离家近**三个求职者普遍关心的维度，与 GenZ Ltd / xialing 等本地研讨的智能匹配思路一致，便于在计算匹配分值上做优化与解释。

---

## 维度映射

| 俗语 | 字段 | 含义 |
|------|------|------|
| **钱多** | `salary_match` (0–10) | 薪资/待遇与候选人期望或市场匹配；JD 或简历未提及则打 5 分中性。 |
| **事少** | `culture_workload_match` (0–10) | 工作强度、弹性、加班文化、团队氛围匹配。 |
| **离家近** | `location_match` (0–10) | 工作地点、远程/混合与候选人偏好匹配。 |

其余维度（background_match、skills_overlap、experience_relevance、seniority、language_requirement、company_score）保持不变；**overall** 由 LLM 综合考虑上述所有维度（含钱多事少离家近）产出 0–100 综合分。

---

## 实现要点

1. **Schema**（`tatha.jobs.schemas.JobMatchScore`）  
   - 新增 `salary_match`、`location_match`、`culture_workload_match`，默认 5，范围 0–10。

2. **Prompt**（`tatha.jobs.scoring`）  
   - 在 PydanticAI Agent 的 system_prompt 中明确要求对「钱多、事少、离家近」三项打分，并说明 overall 需综合考虑这些维度；summary / fit_bullets 可提及薪资、地点、强度亮点。

3. **流水线**（`tatha.jobs.pipeline`）  
   - 若职位带 `location`，拼成「工作地点：{location}\n\n{description}」再交给 LLM，以便模型利用地点信息打 location_match。

4. **排序与展示**  
   - 当前仍按 `score.overall` 排序。**「钱多事少离家近」加权综合分**用于排序或前端展示属于演示版能力，留待后期与 Web/演示版一并实现。

---

## 参考来源

- **xialing**：`📚钱多事少离家近-核心文件清单.md`、`📊钱多事少离家近-智能匹配系统学习报告.md`（五维度与公式说明）。
- **genzltd**：`zervigo_future/backend/internal/job-service/job_evolution_models.go` 中 `SmartMatching`（SkillMatch、ExperienceMatch、**LocationMatch**、**SalaryMatch**、**CultureMatch**）；综合分可为五维平均或加权。
- **JobFirst**：`services/ai-service-1/job_matching_engine.py`、`enhanced_job_matching_engine.py` 中的多维度评分与行业权重。

上述资产与 Tatha 主仓无代码依赖；仅采纳「钱多事少离家近」的维度划分与命名，在现有 LLM 打分流程中增加三字段与 prompt 描述，不引入新服务或 DB。
